{"version":3,"sources":["main.js","news-aggregator.js"],"names":["$","document","foundation","onreadystatechange","readyState","querySelector","createNews","newsUrls","target","promises","data","getResource","url","Promise","resolve","reject","fetch","then","response","json","forEach","item","push","sortItems","sort","a","b","aTime","Date","datum","getTime","bTime","displayItems","innerHTML","html","bild","title","termin","all"],"mappings":";;AAAAA,CAAA,CAAAC,QAAA,CAAA,CAAAC,UAAA;AAEA;;;AAGAD,QAAA,CAAAE,kBAAA,GAAA,YAAA;AACA,MAAAF,QAAA,CAAAG,UAAA,IAAA,UAAA,EAAA;AACA,QAAAH,QAAA,CAAAI,aAAA,CAAA,aAAA,CAAA,EAAA;AACAC,MAAAA,UAAA;AACA;AACA;AACA,CANA;;ACLA,SAAAA,UAAA,GAAA;AAEA,MAAAC,QAAA,GAAA,CAAA,qDAAA,EAAA,oBAAA,CAAA;AACA,MAAAC,MAAA,GAAAP,QAAA,CAAAI,aAAA,CAAA,wBAAA,CAAA;AACA,MAAAI,QAAA,GAAA,EAAA;AACA,MAAAC,IAAA,GAAA,EAAA;;AAEA,WAAAC,WAAA,CAAAC,GAAA,EAAA;AACA,WAAA,IAAAC,OAAA,CAAA,UAAAC,OAAA,EAAAC,MAAA,EAAA;AACAC,MAAAA,KAAA,CAAAJ,GAAA,CAAA,CACAK,IADA,CACA,UAAAC,QAAA,EAAA;AACA,eAAAA,QAAA,CAAAC,IAAA,EAAA;AACA,OAHA,EAIAF,IAJA,CAKA,UAAAE,IAAA,EAAA;AACAA,QAAAA,IAAA,CAAAC,OAAA,CAAA,UAAAC,IAAA,EAAA;AACAX,UAAAA,IAAA,CAAAY,IAAA,CAAAD,IAAA;AACA,SAFA;AAGA,OATA,EAUAJ,IAVA,CAUA;AAAA,eAAAH,OAAA,CAAA,IAAA,CAAA;AAAA,OAVA;AAWA,KAZA,CAAA;AAaA;;AAEA,WAAAS,SAAA,GAAA;AACAb,IAAAA,IAAA,CAAAc,IAAA,CAAA,UAAAC,CAAA,EAAAC,CAAA,EAAA;AACA,UAAAC,KAAA,GAAA,IAAAC,IAAA,CAAAH,CAAA,CAAAI,KAAA,EAAAC,OAAA,EAAA;AACA,UAAAC,KAAA,GAAA,IAAAH,IAAA,CAAAF,CAAA,CAAAG,KAAA,EAAAC,OAAA,EAAA;AACA,aAAAC,KAAA,GAAAJ,KAAA;AACA,KAJA;AAKA;;AAEA,WAAAK,YAAA,GAAA;AACAxB,IAAAA,MAAA,CAAAyB,SAAA,GAAA,EAAA;AACAvB,IAAAA,IAAA,CAAAU,OAAA,CAAA,UAAAC,IAAA,EAAA;AACA,UAAAa,IAAA,GAAA,4DAAAb,IAAA,CAAAT,GAAA,GAAA,0EAAA,GAAAS,IAAA,CAAAc,IAAA,GAAA,+DAAA,GAAAd,IAAA,CAAAe,KAAA,GAAA,kDAAA,GAAAf,IAAA,CAAAgB,MAAA,GAAA,sBAAA;AACA7B,MAAAA,MAAA,CAAAyB,SAAA,IAAAC,IAAA;AACA,KAHA;AAKA;;AAEA3B,EAAAA,QAAA,CAAAa,OAAA,CAAA,UAAAR,GAAA,EAAA;AACAH,IAAAA,QAAA,CAAAa,IAAA,CAAAX,WAAA,CAAAC,GAAA,CAAA;AACA,GAFA;AAIAC,EAAAA,OAAA,CAAAyB,GAAA,CAAA7B,QAAA,EACAQ,IADA,CACA;AAAA,WAAAM,SAAA,EAAA;AAAA,GADA,EAEAN,IAFA,CAEA;AAAA,WAAAe,YAAA,EAAA;AAAA,GAFA;AAGA","file":"mi-75a448cf.js","sourcesContent":["$(document).foundation();\n\n /* Main\n-----------------------------------------------------------------------------*/\n\ndocument.onreadystatechange = function () {\n  if (document.readyState == \"complete\") {\n    if (document.querySelector(\"#eventblock\")) {\n      createNews();\n    }\n  }\n}\n","function createNews() {\n\n  const newsUrls = ['https://th-koeln.github.io/mi-master-wtw/pulse.json', '/events/index.json'];\n  const target = document.querySelector(\".js-eventblock-vanilla\");\n  let promises = [];\n  let data = [];\n\n  function getResource(url) { \n    return new Promise((resolve, reject) => {\n      fetch(url)\n        .then(response => {\n          return response.json();\n        })\n        .then(\n          json => {\n            json.forEach(function(item){\n              data.push(item);\n            });\n          }\n        ).then(()=>resolve(true));  \n    });\n  }\n\n  function sortItems(){\n    data.sort(function(a, b) {\n      let aTime = new Date(a.datum).getTime();\n      let bTime = new Date(b.datum).getTime();\n      return bTime - aTime;\n    });\n  }\n\n  function displayItems(){\n    target.innerHTML = \"\";\n    data.forEach(function(item){\n      let html = '<div class=\"cell medium-6 large-4 xxxlarge-3\"><a href=\"'+item.url+'\"><div class=\"m-mi-pulse-teaser has-image\" style=\"background-image: url('+item.bild+')\"><div class=\"m-mi-pulse-teaser--content\"><h2 class=\"title\">'+item.title+'</h2></div><p class=\"m-mi-pulse-teaser--footer\">'+item.termin+'</p></div></a></div>';\n      target.innerHTML += html;\n    });\n    \n  }\n\n  newsUrls.forEach(function(url) {\n    promises.push(getResource(url));\n  });\n  \n  Promise.all(promises)\n    .then(() => sortItems())\n    .then(() => displayItems());\n}\n\n\n\n\n\n\n\n"]}