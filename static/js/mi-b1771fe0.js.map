{"version":3,"sources":["main.js","news-aggregator.js"],"names":["$","document","foundation","onreadystatechange","readyState","querySelector","createNews","newsUrls","schema","target","promises","data","getResource","url","Promise","resolve","reject","fetch","then","response","json","forEach","item","console","log","push","sortItems","sort","a","b","aTime","Date","date","getTime","bTime","displayItems","innerHTML","html","bild","title","termin","all"],"mappings":";;AAAAA,CAAA,CAAAC,QAAA,CAAA,CAAAC,UAAA;AAEA;;;AAGAD,QAAA,CAAAE,kBAAA,GAAA,YAAA;AACA,MAAAF,QAAA,CAAAG,UAAA,IAAA,UAAA,EAAA;AACA,QAAAH,QAAA,CAAAI,aAAA,CAAA,aAAA,CAAA,EAAA;AACAC,MAAAA,UAAA;AACA;AACA;AACA,CANA;;ACLA,SAAAA,UAAA,GAAA;AAEA,MAAAC,QAAA,GAAA,CAAA,qDAAA,EAAA,oBAAA,CAAA;AACA,MAAAC,MAAA,GAAA,CAAA;AACA,aAAA,QADA;AAEA,cAAA,QAFA;AAGA,YAAA,MAHA;AAIA,YAAA;AAJA,GAAA,CAAA;AAOA,MAAAC,MAAA,GAAAR,QAAA,CAAAI,aAAA,CAAA,aAAA,CAAA;AACA,MAAAK,QAAA,GAAA,EAAA;AACA,MAAAC,IAAA,GAAA,EAAA;;AAEA,WAAAC,WAAA,CAAAC,GAAA,EAAA;AACA,WAAA,IAAAC,OAAA,CAAA,UAAAC,OAAA,EAAAC,MAAA,EAAA;AACAC,MAAAA,KAAA,CAAAJ,GAAA,CAAA,CACAK,IADA,CACA,UAAAC,QAAA,EAAA;AACA,eAAAA,QAAA,CAAAC,IAAA,EAAA;AACA,OAHA,EAIAF,IAJA,CAKA,UAAAE,IAAA,EAAA;AACAA,QAAAA,IAAA,CAAAC,OAAA,CAAA,UAAAC,IAAA,EAAA;AACAC,UAAAA,OAAA,CAAAC,GAAA,CAAAF,IAAA;AACA,SAFA;AAGA,OATA,EAWAJ,IAXA,CAYA,UAAAE,IAAA,EAAA;AACAA,QAAAA,IAAA,CAAAC,OAAA,CAAA,UAAAC,IAAA,EAAA;AACAX,UAAAA,IAAA,CAAAc,IAAA,CAAAH,IAAA;AACA,SAFA;AAGA,OAhBA,EAkBAJ,IAlBA,CAkBA;AAAA,eAAAH,OAAA,CAAA,IAAA,CAAA;AAAA,OAlBA;AAmBA,KApBA,CAAA;AAqBA;;AAEA,WAAAW,SAAA,GAAA;AACAf,IAAAA,IAAA,CAAAgB,IAAA,CAAA,UAAAC,CAAA,EAAAC,CAAA,EAAA;AACA,UAAAC,KAAA,GAAA,IAAAC,IAAA,CAAAH,CAAA,CAAAI,IAAA,EAAAC,OAAA,EAAA;AACA,UAAAC,KAAA,GAAA,IAAAH,IAAA,CAAAF,CAAA,CAAAG,IAAA,EAAAC,OAAA,EAAA;AACA,aAAAC,KAAA,GAAAJ,KAAA;AACA,KAJA;AAKA;;AAEA,WAAAK,YAAA,GAAA;AACA1B,IAAAA,MAAA,CAAA2B,SAAA,GAAA,EAAA;AACAzB,IAAAA,IAAA,CAAAU,OAAA,CAAA,UAAAC,IAAA,EAAA;AACA,UAAAe,IAAA,GAAA,4DAAAf,IAAA,CAAAT,GAAA,GAAA,0EAAA,GAAAS,IAAA,CAAAgB,IAAA,GAAA,+DAAA,GAAAhB,IAAA,CAAAiB,KAAA,GAAA,kDAAA,GAAAjB,IAAA,CAAAkB,MAAA,GAAA,sBAAA;AACA/B,MAAAA,MAAA,CAAA2B,SAAA,IAAAC,IAAA;AACA,KAHA;AAKA;;AAEA9B,EAAAA,QAAA,CAAAc,OAAA,CAAA,UAAAR,GAAA,EAAA;AACAH,IAAAA,QAAA,CAAAe,IAAA,CAAAb,WAAA,CAAAC,GAAA,CAAA,EADA,CAEA;AACA,GAHA;AAKAC,EAAAA,OAAA,CAAA2B,GAAA,CAAA/B,QAAA,EACAQ,IADA,CACA;AAAA,WAAAQ,SAAA,EAAA;AAAA,GADA,EAEAR,IAFA,CAEA;AAAA,WAAAiB,YAAA,EAAA;AAAA,GAFA;AAGA","file":"mi-b1771fe0.js","sourcesContent":["$(document).foundation();\n\n /* Main\n-----------------------------------------------------------------------------*/\n\ndocument.onreadystatechange = function () {\n  if (document.readyState == \"complete\") {\n    if (document.querySelector(\"#eventblock\")) {\n      createNews();\n    }\n  }\n}\n","function createNews() {\n\n  const newsUrls = ['https://th-koeln.github.io/mi-master-wtw/pulse.json', '/events/index.json'];\n  const schema = [{\n    \"title\": \"string\",\n    \"termin\": \"string\",\n    \"date\": \"date\",\n    \"bild\": \"url\"\n  }];\n    \n  const target = document.querySelector(\"#eventblock\");\n  let promises = [];\n  let data = [];\n\n  function getResource(url) { \n    return new Promise((resolve, reject) => {\n      fetch(url)\n        .then(response => {\n          return response.json();\n        })\n        .then(\n          json => {\n            json.forEach(function(item){\n              console.log(item);\n            });\n          }\n      )\n        .then(\n          json => {\n            json.forEach(function(item){\n              data.push(item);\n            });\n          }\n        )\n        .then(() => resolve(true));  \n    });\n  }\n\n  function sortItems() {\n    data.sort(function(a, b) {\n      let aTime = new Date(a.date).getTime();\n      let bTime = new Date(b.date).getTime();\n      return bTime - aTime;\n    });\n  }\n\n  function displayItems() {\n    target.innerHTML = \"\";\n    data.forEach(function(item){\n      let html = '<div class=\"cell medium-6 large-4 xxxlarge-3\"><a href=\"'+item.url+'\"><div class=\"m-mi-pulse-teaser has-image\" style=\"background-image: url('+item.bild+')\"><div class=\"m-mi-pulse-teaser--content\"><h2 class=\"title\">'+item.title+'</h2></div><p class=\"m-mi-pulse-teaser--footer\">'+item.termin+'</p></div></a></div>';\n      target.innerHTML += html;\n    });\n    \n  }\n\n  newsUrls.forEach(function(url) {\n    promises.push(getResource(url));\n    //promises.push(validateSchema());\n  });\n  \n  Promise.all(promises)\n    .then(() => sortItems())\n    .then(() => displayItems());\n}\n\n\n\n\n\n\n\n"]}