<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
	{{ $globalParams := . }}
	{{ $scratch := newScratch }}
	<head>
  		{{ partial "system/head/head.html" $globalParams }}
    </head>
    
    {{ if .File }}
        <body data-kind="{{.Kind}}" data-baseref="{{ .Site.Params.BaseFragment }}/{{ path.Dir .File.Dir }}" data-permalink="{{ .RelPermalink }}">
        {{ else }}
        <body data-kind="{{.Kind}}" data-baseref="{{ .Site.Params.BaseFragment }}/" data-permalink="{{ .RelPermalink }}">
    {{ end }}
  		<div class="off-canvas-wrapper">
    		<div class="off-canvas position-left" id="offCanvas" data-off-canvas>
      			{{ partial "system/sidebar/sidebar.html" $globalParams }}
    		</div>
	
			<div class="off-canvas-content" data-off-canvas-content>
    			<div class="grid-container fluid has-gap">
        			<div class="grid-x grid-margin-x">
          				<div class="large-12 cell">
                            {{ if .File}}
                                {{ $fragments := cond ( in .File.Dir "/") (split .File.Dir "/") (split .File.Dir "\\") }}
                                {{ $iFragments := sub (len $fragments) 2 }}
                                {{ $scratch.Set "iFragments" $iFragments }}
                                {{ $fragment := index ($fragments) 0 }}
                                {{ $fragments := cond ( in .File.Dir "/") (split .Page.Type "/") (split .Page.Type "\\") }}

                                {{ $slug := cond (eq (len $fragments) 1) .Page.Data.Term $fragment }}
                    
                                {{ if lt ($iFragments) 1 }}
                                    {{ $scratch.Set "iFragments" 1 }}
                                {{ end }}
                    
                                {{ $scratch.Set "fragments" (first ($scratch.Get "iFragments") (cond ( in .File.Dir "/") (split .File.Dir "/") (split .File.Dir "\\"))) }}
                    
                                {{ if .IsHome }}
                                    {{ $scratch.Set "fragments" false }}
                                {{ end }}
                                
                                {{ $fragments :=  $scratch.Get "fragments" }}
                                {{ partial "system/navigationHeader/navigationHeader.html" (dict "slug" $slug "BaseURL" .Site.BaseURL "Fragments" $fragments "globalParams" $globalParams) }}
                            {{ end }}
						</div>
					</div>
					
					{{ block "main" . }}{{ end }}
      			</div>
	  
				{{ partial "system/footer/footer.html" $globalParams }}
    		</div>
  		</div>
		{{ partial "system/scripts/scripts.html" $globalParams }}
	</body>
</html>
